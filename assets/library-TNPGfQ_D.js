import"./modulepreload-polyfill-YP0FEG5d.js";import{l as t}from"./storage-DL_W2Xu7.js";class e{constructor(){this.allSnippets=[],this.userStats={},this.currentFilter="all",this.currentSearch="",this.currentSort="name",this.initialize()}async initialize(){this.setupEventListeners(),await this.loadMetadata()}async loadMetadata(){try{const e=await fetch("snippets/metadata.json");if(!e.ok)throw new Error(`HTTP error! status: ${e.status}`);const n=await e.json();this.allSnippets=n.snippets,this.userStats=t(),this.renderSummaryStats(),this.renderSnippets(),document.getElementById("loadingState")?.classList.add("hidden"),document.getElementById("snippetGrid")?.classList.remove("hidden")}catch(e){console.error("Error loading metadata:",e);const t=document.getElementById("loadingState");t&&(t.innerHTML=`\n          <div class="text-center text-red-400">\n            <div class="text-4xl mb-4">‚ö†Ô∏è</div>\n            <h3 class="text-xl font-bold mb-2">Failed to load snippets</h3>\n            <p>Error: ${e instanceof Error?e.message:String(e)}</p>\n            <p class="mt-2 text-sm">Make sure you're running from the project root directory</p>\n          </div>\n        `)}}renderSummaryStats(){const t=Object.values(this.userStats),e=document.getElementById("totalSnippets");e&&(e.textContent=String(this.allSnippets.length));const n=document.getElementById("practicedCount");if(n&&(n.textContent=String(t.length)),t.length>0){const e=t.reduce((t,e)=>t+(e.bestWPM||0),0)/t.length,n=Math.max(...t.map(t=>t.bestWPM||0)),s=document.getElementById("averageWPM");s&&(s.textContent=String(Math.round(e)));const a=document.getElementById("bestWPM");a&&(a.textContent=String(n))}else{const t=document.getElementById("averageWPM");t&&(t.textContent="0");const e=document.getElementById("bestWPM");e&&(e.textContent="0")}}filterAndSortSnippets(){let t=[...this.allSnippets];if("all"!==this.currentFilter&&(t=t.filter(t=>t.language===this.currentFilter)),this.currentSearch){const e=this.currentSearch.toLowerCase();t=t.filter(t=>t.name.toLowerCase().includes(e))}return t.sort((t,e)=>{switch(this.currentSort){case"name":return t.name.localeCompare(e.name);case"wpm":{const n=this.userStats[t.id]||{};return((this.userStats[e.id]||{}).bestWPM||0)-(n.bestWPM||0)}case"practiced":{const n=this.userStats[t.id]||{};return((this.userStats[e.id]||{}).practiceCount||0)-(n.practiceCount||0)}case"lines":return t.lines-e.lines;default:return 0}}),t}renderSnippets(){const t=this.filterAndSortSnippets(),e=document.getElementById("snippetGrid"),n=document.getElementById("emptyState");if(e&&n){if(0===t.length)return e.classList.add("hidden"),void n.classList.remove("hidden");e.classList.remove("hidden"),n.classList.add("hidden"),e.innerHTML=t.map(t=>this.createSnippetCard(t)).join("")}}createSnippetCard(t){const e=this.userStats[t.id]||{},n=(e.practiceCount||0)>0,s=n?`\n          <div class="stats-display">\n            <div class="flex justify-between text-xs mb-1">\n              <span class="text-gray-400">Best WPM:</span>\n              <span class="font-bold text-green-400">${e.bestWPM||0}</span>\n            </div>\n            <div class="flex justify-between text-xs">\n              <span class="text-gray-400">Practiced:</span>\n              <span class="font-bold">${e.practiceCount}x</span>\n            </div>\n          </div>\n        `:'\n          <div class="stats-display">\n            <div class="text-xs text-gray-500 text-center">Not practiced yet</div>\n          </div>\n        ',a=this.cleanName(t.name),r=this.escapeHtml(t.path);return`\n          <div class="snippet-card" onclick="window.libraryPage.practiceSnippet('${r}')">\n            <div class="flex items-start justify-between gap-2">\n              <h3 class="font-bold text-lg flex-1 leading-tight">${a}</h3>\n              <span class="language-badge lang-${t.language}">${t.language}</span>\n            </div>\n            \n            <div class="flex gap-2 items-center text-sm text-gray-400">\n              <span>üìÑ ${t.lines} lines</span>\n              <span>‚Ä¢</span>\n              <span>‚å®Ô∏è ${t.typeable_chars} chars</span>\n            </div>\n\n            ${s}\n\n            <button class="practice-button mt-auto" onclick="window.libraryPage.practiceSnippet('${r}'); event.stopPropagation();">\n              ${n?"Practice Again":"Start Practice"}\n            </button>\n          </div>\n        `}cleanName(t){return t.replace(/^Gm \d+ \d+_\d+ /,"").replace(/-/g," ")}escapeHtml(t){const e=document.createElement("div");return e.textContent=t,e.innerHTML}practiceSnippet(t){window.location.href=`index.html?snippet=${encodeURIComponent(t)}`}setupEventListeners(){document.querySelectorAll(".filter-button[data-language]").forEach(t=>{t.addEventListener("click",()=>{document.querySelectorAll(".filter-button[data-language]").forEach(t=>t.classList.remove("active")),t.classList.add("active"),this.currentFilter=t.dataset.language||"all",this.renderSnippets()})});const t=document.getElementById("searchInput");t&&t.addEventListener("input",t=>{this.currentSearch=t.target.value,this.renderSnippets()});const e=document.getElementById("sortSelect");e&&e.addEventListener("change",t=>{this.currentSort=t.target.value,this.renderSnippets()})}}document.addEventListener("DOMContentLoaded",()=>{window.libraryPage=new e});
//# sourceMappingURL=library-TNPGfQ_D.js.map
